\chapter{Conclusion}

This thesis presented SweetPea, a system for concisely describing experimental designs and rigerously generating experimental sequences that satisfy the design. SweetPea's high-level language allows scientists to declaratively describe the experiment they want to conduct rather than forcing them to mechanically describe how to construct their experimental sequences. This allows scientists to write concise, correct programs which describe their experiments, and produce unbiased experimental sequences; these programs can then be published and shared to document the experiment and facilitate replicability.

SweetPea provides high-level notions of factors, levels, derived levels and factors, and counting and balancing constraints. Psychologists can use this high-level language to specify their experimental designs, and SweetPea will encode those descriptions as a boolean formula. SweetPea guarantees that each experiemental sequences which satisfies the design is approximately uniformly likely. Guaranteeing that each sequence is exactly uniformly likely is an intractable problem because it is \#P-hard for a large problem-size; we gain traction on this problem by making the acceptable compromise of guaranteeing that the sequences are approximately uniformly probably. SweetPea achieves this promise by calling out to the SAT-sampler Unigen, which in turn uses universal hash functions to get uniformity.

SweetPea can be used to model common task-switching experiments such as variants of the Stroop test. We expect that in the future SweetPea can be used to model a wide range of experiments in psychology and other experimental sciences.
